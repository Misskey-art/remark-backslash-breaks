name: Maintain code quality

on:
  push:
  pull_request:
  pull_request_review:

permissions:
  contents: read

jobs:
  test:
    name: Test
    if: github.event_name == 'push' || github.event.pull_request.head.repo.fork
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@96f53100ba2a5449eb71d2e6604bbcd94b9449b5
      - uses: pnpm/action-setup@d2613e087f2e0aa841925861c5a5f7395d552177
        name: Install pnpm
        id: pnpm-install
        with:
          run_install: |
            - args: [--frozen-lockfile, --strict-peer-dependencies]
      - name: Test
        run: pnpm test
